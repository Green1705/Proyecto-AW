<!-- Reserve Modal -->
<div class="modal fade" id="reserveModal" tabindex="-1" aria-labelledby="reserveModalLabel" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
	<div class="modal-dialog modal-dialog-centered modal-lg">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="reserveModalLabel">Registrar reserva</h5>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
			</div>
			<div class="modal-body">
				<form action="/reserva/agregar" method="POST" class="row g-3" id="reserve-form">
					<input type="hidden" id="reserve-user-id" name="id_usuario" value="<%= typeof userId !== 'undefined' ? userId : '' %>" required>
					<input type="hidden" id="reserve-vehicle-id" name="id_automovil" value="<%= typeof selectedCarId !== 'undefined' ? selectedCarId : '' %>" required>
					<input type="hidden" id="reserve-daily-rate" value="<%= typeof selectedCarRate !== 'undefined' ? selectedCarRate : 0 %>">

					<div class="col-12 reserve-modal-summary alert alert-light border">
						Selecciona un vehículo para comenzar la reserva.
					</div>

					<div class="col-md-6">
						<label for="reserve-start" class="form-label">Fecha y hora de inicio</label>
						<input type="datetime-local" class="form-control" id="reserve-start" name="fecha_inicio" required>
					</div>

					<div class="col-md-6">
						<label for="reserve-end" class="form-label">Fecha y hora de fin</label>
						<input type="datetime-local" class="form-control" id="reserve-end" name="fecha_fin" required>
					</div>

					<input type="hidden" id="reserve-status" name="estado" value="activa">

					<div class="col-md-6">
						<label for="reserve-price" class="form-label">Precio final (€)</label>
						<input type="number" class="form-control" id="reserve-price" name="precio_final" min="0" step="0.01" readonly>
					</div>

					<div class="col-md-6">
						<label for="reserve-client-name" class="form-label">Nombre del cliente</label>
						<input type="text" class="form-control reserve-client-field" id="reserve-client-name" name="nombre_cliente" required>
					</div>

					<div class="col-md-6">
						<label for="reserve-client-lastname" class="form-label">Apellido paterno</label>
						<input type="text" class="form-control reserve-client-field" id="reserve-client-lastname" name="apellido_paterno" required>
					</div>

					<div class="col-md-6">
						<label for="reserve-client-second-lastname" class="form-label">Apellido materno</label>
						<input type="text" class="form-control reserve-client-field" id="reserve-client-second-lastname" name="apellido_materno">
					</div>

					<div class="col-md-6">
						<label for="reserve-client-dni" class="form-label">DNI / Pasaporte</label>
						<input type="text" class="form-control reserve-client-field" id="reserve-client-dni" name="dni" required>
					</div>

					<div class="col-md-6">
						<label for="reserve-client-phone" class="form-label">Teléfono</label>
						<input type="tel" class="form-control reserve-client-field" id="reserve-client-phone" name="telefono" required>
					</div>


					<div class="col-12">
						<label for="reserve-notes" class="form-label">Notas / incidencias</label>
						<textarea id="reserve-notes" name="notas" class="form-control" rows="3" placeholder="Registrar incidencias o comentarios del cliente"></textarea>
					</div>

					<div class="col-12 d-flex align-items-end justify-content-end gap-3">
						<button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancelar</button>
						<button type="submit" class="btn btn-primary">Guardar reserva</button>
					</div>
				</form>
			</div>
		</div>
	</div>
</div>
